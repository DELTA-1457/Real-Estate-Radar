<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Radar MVP</title>
    <style>
        body { font-family: 'Kanit', sans-serif; background: #f0f2f5; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .card { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 350px; }
        h2 { text-align: center; color: #1a73e8; margin-bottom: 1.5rem; }
        label { font-size: 0.9rem; color: #5f6368; }
        input { width: 100%; padding: 10px; margin: 5px 0 15px; border: 1px solid #dadce0; border-radius: 8px; box-sizing: border-box; }
        button { width: 100%; padding: 12px; background: #1a73e8; color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:hover { background: #1557b0; }
        .result { margin-top: 20px; text-align: center; display: none; padding: 15px; background: #f8f9fa; border-radius: 10px; }
        .score { font-size: 3rem; font-weight: bold; color: #202124; }
        .status { font-weight: bold; margin-top: 5px; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Property Radar üè¢</h2>
        <label>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏≤‡∏®‡∏Ç‡∏≤‡∏¢ (‡∏ö‡∏≤‡∏ó)</label>
        <input type="number" id="price" placeholder="‡πÄ‡∏ä‡πà‡∏ô 3000000">
        
        <label>‡∏Ç‡∏ô‡∏≤‡∏î‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà (‡∏ï‡∏£.‡∏°.)</label>
        <input type="number" id="sqm" placeholder="‡πÄ‡∏ä‡πà‡∏ô 30">
        
        <button onclick="scan()">‡∏™‡πÅ‡∏Å‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤</button>

        <div id="resultBox" class="result">
            <div style="font-size: 0.8rem; color: #70757a;">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤</div>
            <div class="score" id="score">0</div>
            <div id="status" class="status"></div>
        </div>
    </div>

    <script>
        async function scan() {
            const price = document.getElementById('price').value;
            const sqm = document.getElementById('sqm').value;
            const resultBox = document.getElementById('resultBox');
            
            if(!price || !sqm) return alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•");

            const pricePerSqm = price / sqm;
            resultBox.style.display = 'block';
            document.getElementById('score').innerText = "...";

            try {
                // ‡πÉ‡∏ä‡πâ‡∏•‡∏¥‡∏á‡∏Å‡πå Ngrok ‡πÄ‡∏î‡∏¥‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
                const response = await fetch("https://transisthmian-autoecious-tana.ngrok-free.dev/api/scan", {
                    method: "POST",
                    headers: { 
                        "Content-Type": "application/json",
                        "ngrok-skip-browser-warning": "true"
                    },
                    body: JSON.stringify({ price: pricePerSqm })
                });

                const data = await response.json();
                const score = data.score;
                
                document.getElementById('score').innerText = score + "/100";
                const status = document.getElementById('status');

                if(score >= 80) {
                    status.innerText = "üî• ‡∏Ñ‡∏∏‡πâ‡∏°‡∏Ñ‡πà‡∏≤‡∏°‡∏≤‡∏Å ‡∏ï‡πà‡∏≥‡∏Å‡∏ß‡πà‡∏≤‡∏£‡∏≤‡∏Ñ‡∏≤‡∏ï‡∏•‡∏≤‡∏î!";
                    status.style.color = "#1e8e3e";
                } else if(score >= 50) {
                    status.innerText = "‚öñÔ∏è ‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏ï‡∏≤‡∏°‡∏ï‡∏•‡∏≤‡∏î";
                    status.style.color = "#f9ab00";
                } else {
                    status.innerText = "‚ö†Ô∏è ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏π‡∏á‡∏Å‡∏ß‡πà‡∏≤‡∏ï‡∏•‡∏≤‡∏î";
                    status.style.color = "#d93025";
                }
            } catch (e) {
                alert("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ ‡πÄ‡∏ä‡πá‡∏Ñ Ngrok ‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á?");
            }
        }
    </script>
</body>
</html>
